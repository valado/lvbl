import type { Profile, Project, Task, TaskLog, DashboardStats } from '@/types/database'

const now = new Date().toISOString()
const yesterday = new Date(Date.now() - 86400000).toISOString()
const twoDaysAgo = new Date(Date.now() - 172800000).toISOString()
const tomorrow = new Date(Date.now() + 86400000).toISOString()

export const MOCK_USER_ID = '550e8400-e29b-41d4-a716-446655440000'

export const MOCK_PROFILE: Profile = {
  id: MOCK_USER_ID,
  display_name: 'Demo User',
  avatar_url: null,
  telegram_id: 123456789,
  slack_user_id: null,
  created_at: twoDaysAgo,
  updated_at: now,
}

export const MOCK_PROJECTS: Project[] = [
  {
    id: 'proj-001',
    owner_id: MOCK_USER_ID,
    name: 'E-Commerce Dashboard',
    lovable_url: 'https://lovable.dev/projects/abc123',
    description: 'Main e-commerce admin dashboard',
    created_at: twoDaysAgo,
    updated_at: yesterday,
  },
  {
    id: 'proj-002',
    owner_id: MOCK_USER_ID,
    name: 'Landing Page',
    lovable_url: 'https://lovable.dev/projects/def456',
    description: 'Marketing landing page with hero section',
    created_at: yesterday,
    updated_at: yesterday,
  },
  {
    id: 'proj-003',
    owner_id: MOCK_USER_ID,
    name: 'Blog Platform',
    lovable_url: 'https://lovable.dev/projects/ghi789',
    description: null,
    created_at: now,
    updated_at: now,
  },
]

export const MOCK_TASKS: Task[] = [
  {
    id: 'task-001',
    owner_id: MOCK_USER_ID,
    project_id: 'proj-001',
    task_type: 'existing_project',
    status: 'completed',
    priority: 'high',
    title: 'Add product filtering',
    prompt: 'Add a sidebar with product filters: category dropdown, price range slider (min/max), brand checkboxes, and a rating filter. Include a "Clear Filters" button and show the active filter count in the header.',
    image_urls: [],
    scheduled_at: null,
    executed_at: yesterday,
    lovable_url: 'https://lovable.dev/?autosubmit=true#prompt=Add%20a%20sidebar%20with%20product%20filters',
    error_message: null,
    source_platform: 'telegram',
    source_chat_id: '123456',
    source_message_id: '789',
    created_at: twoDaysAgo,
    updated_at: yesterday,
    project: MOCK_PROJECTS[0],
  },
  {
    id: 'task-002',
    owner_id: MOCK_USER_ID,
    project_id: null,
    task_type: 'new_project',
    status: 'pending',
    priority: 'normal',
    title: 'Create recipe sharing app',
    prompt: 'Build a recipe sharing application with user registration, recipe creation with ingredients and steps, photo upload, search by ingredients, and a favorites system. Use a warm, food-themed color palette.',
    image_urls: ['https://example.com/mockup1.png'],
    scheduled_at: tomorrow,
    executed_at: null,
    lovable_url: null,
    error_message: null,
    source_platform: 'dashboard',
    source_chat_id: null,
    source_message_id: null,
    created_at: yesterday,
    updated_at: yesterday,
  },
  {
    id: 'task-003',
    owner_id: MOCK_USER_ID,
    project_id: 'proj-002',
    task_type: 'existing_project',
    status: 'ready',
    priority: 'urgent',
    title: 'Fix hero section responsiveness',
    prompt: 'The hero section breaks on mobile. Fix the layout so the headline, subheading, and CTA button stack vertically on screens under 768px. The background image should use object-fit: cover.',
    image_urls: [],
    scheduled_at: null,
    executed_at: null,
    lovable_url: null,
    error_message: null,
    source_platform: 'telegram',
    source_chat_id: '123456',
    source_message_id: '801',
    created_at: yesterday,
    updated_at: now,
    project: MOCK_PROJECTS[1],
  },
  {
    id: 'task-004',
    owner_id: MOCK_USER_ID,
    project_id: 'proj-001',
    task_type: 'existing_project',
    status: 'failed',
    priority: 'normal',
    title: 'Add checkout flow',
    prompt: 'Implement a multi-step checkout: cart review, shipping address form, payment method selection, order confirmation. Include form validation and a progress indicator.',
    image_urls: [],
    scheduled_at: null,
    executed_at: twoDaysAgo,
    lovable_url: null,
    error_message: 'Prompt exceeded maximum length after URL encoding',
    source_platform: 'dashboard',
    source_chat_id: null,
    source_message_id: null,
    created_at: twoDaysAgo,
    updated_at: twoDaysAgo,
    project: MOCK_PROJECTS[0],
  },
  {
    id: 'task-005',
    owner_id: MOCK_USER_ID,
    project_id: null,
    task_type: 'new_project',
    status: 'generating',
    priority: 'high',
    title: 'Portfolio website',
    prompt: 'Create a developer portfolio with dark theme, animated hero section, project showcase grid, skills section with progress bars, timeline for experience, and a contact form.',
    image_urls: [],
    scheduled_at: null,
    executed_at: null,
    lovable_url: null,
    error_message: null,
    source_platform: 'telegram',
    source_chat_id: '123456',
    source_message_id: '810',
    created_at: now,
    updated_at: now,
  },
  {
    id: 'task-006',
    owner_id: MOCK_USER_ID,
    project_id: 'proj-003',
    task_type: 'existing_project',
    status: 'completed',
    priority: 'low',
    title: 'Add dark mode toggle',
    prompt: 'Add a dark mode toggle button in the header. Persist the preference in localStorage. Use CSS variables for theme colors.',
    image_urls: [],
    scheduled_at: null,
    executed_at: now,
    lovable_url: 'https://lovable.dev/?autosubmit=true#prompt=Add%20a%20dark%20mode%20toggle',
    error_message: null,
    source_platform: 'dashboard',
    source_chat_id: null,
    source_message_id: null,
    created_at: yesterday,
    updated_at: now,
    project: MOCK_PROJECTS[2],
  },
]

export const MOCK_TASK_LOGS: TaskLog[] = [
  { id: 'log-001', task_id: 'task-001', action: 'created', details: { source: 'telegram' }, created_at: twoDaysAgo },
  { id: 'log-002', task_id: 'task-001', action: 'status_changed', details: { from: 'pending', to: 'ready' }, created_at: twoDaysAgo },
  { id: 'log-003', task_id: 'task-001', action: 'status_changed', details: { from: 'ready', to: 'generating' }, created_at: yesterday },
  { id: 'log-004', task_id: 'task-001', action: 'status_changed', details: { from: 'generating', to: 'completed' }, created_at: yesterday },
  { id: 'log-005', task_id: 'task-003', action: 'created', details: { source: 'telegram' }, created_at: yesterday },
  { id: 'log-006', task_id: 'task-003', action: 'status_changed', details: { from: 'pending', to: 'ready' }, created_at: now },
]

export const MOCK_STATS: DashboardStats = {
  total_tasks: MOCK_TASKS.length,
  pending_tasks: MOCK_TASKS.filter(t => t.status === 'pending' || t.status === 'ready').length,
  completed_today: MOCK_TASKS.filter(t => t.status === 'completed' && t.executed_at && new Date(t.executed_at).toDateString() === new Date().toDateString()).length,
  failed_tasks: MOCK_TASKS.filter(t => t.status === 'failed').length,
}
